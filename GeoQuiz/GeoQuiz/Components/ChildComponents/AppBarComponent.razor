@inject NavigationManager navigation

<MudAppBar Fixed=true
           Elevation="2"
           Style="background-color: #2E3E43; color: #f3f3f3; height: 60px; justify-content:center;">


    <MudContainer MaxWidth="MaxWidth.Large"
                  Class="d-flex align-center"
                  Style="height: 100%;  padding-left: 250px;">

        <MudItem xs="4" Class="d-flex align-center justify-center">
            <img src="SVGS/TempIcon.svg" alt="Logo" width="24" height="24" style="margin-right: 10px;" />
            <MudText Style="font-size: 20px; font-weight: 450;">
                Quizaph
            </MudText>
        </MudItem>

        <MudItem xs="8" Class="d-flex align-center justify-center">
            <MudTabs MinimumTabWidth="120px"
                     ActivePanelIndexChanged="PanelChanged"
                     ActivePanelIndex="@selectedTab"
                     Color="Color.Inherit">
                <MudTabPanel Text="Discover" Icon="@Icons.Material.Filled.LensBlur"
                             Style="font-size: 12px; background-color: #2E3E43; text-transform: none;" />
                <MudTabPanel Visible="false" />
                <MudTabPanel Text="Quizes" Icon="@Icons.Material.Filled.Gamepad"
                             Style="font-size: 12px; background-color: #2E3E43; text-transform: none;" />
                <MudTabPanel Text="About" Icon="@Icons.Material.Filled.LightbulbCircle"
                             Style="font-size: 12px; background-color: #2E3E43; text-transform: none;" />
            </MudTabs>
        </MudItem>
    </MudContainer>
    @if (!IsLoggedIn)
    {
        <MudContainer MaxWidth="MaxWidth.Large"
                      Class="d-flex align-center"
                      Style="height: 100%; padding-right: 250px; justify-content: right;">
            <MudButton Style="color: #ebebeb; font-size: 12px; text-transform: none; margin-right: 5px;"
                       Color="Color.Transparent"
                       DropShadow="false"
                       Variant="Variant.Text"
                       OnClick="@SignIn">
                Login
            </MudButton>
            <MudButton Style="background-color: black; text-transform: none; border-radius: 20px; color: #ebebeb; font-size: 12px;" OnClick="@SignUp"
                       Variant="Variant.Filled">
                Sign Up
            </MudButton>
        </MudContainer>
    }
    else
    {
        <MudContainer MaxWidth="MaxWidth.Large"
                      Class="d-flex align-center"
                      Style="height: 100%; padding-right: 300px; justify-content: right;">
            <MudMenu Label="Profile" Variant="Variant.Text" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" Style="color: #ebebeb;" Color="Color.Inherit" Size="Size.Small" Dense>
                <MudMenuItem Icon="@Icons.Material.Filled.Person" Label="Edit profile" IconColor="Color.Tertiary" />
                <MudMenuItem Icon="@(isDarkMode? Icons.Material.Filled.DarkMode :  Icons.Material.Filled.WbSunny)" Label="Toggle Darkmode" IconColor="Color.Warning" />
                <MudMenuItem Icon="@Icons.Material.Filled.Logout" Label="Logout" IconColor="Color.Dark" OnClick="@Logout" />
            </MudMenu>
        </MudContainer>
    }
</MudAppBar>
@code {
    public bool isDarkMode = true;
    private bool IsLoggedIn = false;
    private int selectedTab = 1; // Dummy tab with no content

    private void MainIconClick()
    {
        selectedTab = 1;
        navigation.NavigateTo("/");
    }

    private void Logout()
    {
        IsLoggedIn = false;
    }

    private void SignIn()
    {
        navigation.NavigateTo("Login");
    }

    private void SignUp()
    {
        navigation.NavigateTo("SignUp");
    }

    private void PanelChanged(int index)
    {
        selectedTab = index;
        var route = index switch
        {
            0 => "/",
            1 => "/",
            2 => "/Quizes",
            3 => "/",
            _ => "/"
        };
        navigation.NavigateTo(route);
    }
}
